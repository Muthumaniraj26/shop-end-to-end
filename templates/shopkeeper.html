<!doctype html>
<title>Shopkeeper</title>
<h2>Shopkeeper Dashboard: {{username}}</h2>
<a href="/logout">Logout</a>
<hr>
<h3>Change your password</h3>
<form id="changePassForm">
  Old Password: <input id="old_pass" type="password"><br>
  New Password: <input id="new_pass" type="password"><br>
  <button type="button" onclick="changePass()">Change Password</button>
</form>
<div id="changePassResult"></div>

<script>
async function changePass(){
  const old_password = document.getElementById("old_pass").value;
  const new_password = document.getElementById("new_pass").value;
  const r = await fetch("/user/change_password",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({old_password,new_password})
  });
  const res = await r.json();
  document.getElementById("changePassResult").innerText = res.message || res.error;
}
</script>
